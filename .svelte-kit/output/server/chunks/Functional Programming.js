import { G as sanitize_props, J as spread_props } from "./index.js";
import { M as MarkdownLayout } from "./MarkdownLayout.js";
const metadata = {
  "title": "Functional Programming In Python",
  "tags": ["functional-programming", "python"]
};
const { title, tags } = metadata;
function Functional_Programming_md($$renderer, $$props) {
  const $$sanitized_props = sanitize_props($$props);
  MarkdownLayout($$renderer, spread_props([
    $$sanitized_props,
    metadata,
    {
      children: ($$renderer2) => {
        $$renderer2.push(`<p><em>Note: For completing this lecture, you might wanna first read through [[Python From Scratch]] and [[Object Oriented Programming in Python]]</em></p> <h3>what is functional programming ?</h3> <ul><li><p>Functional programming is a style (or “paradigm” if you’re pretentious) of programming where we compose functions instead of mutating state (updating the value of variables).</p></li> <li><p><a href="https://en.wikipedia.org/wiki/Functional_programming" rel="nofollow">Functional programming</a> is more about declaring <em>what</em> you want to happen, rather than <em>how</em> you want it to happen.</p></li> <li><p><a href="https://en.wikipedia.org/wiki/Imperative_programming" rel="nofollow">Imperative</a> (or procedural) programming declares both the <em>what</em> and the <em>how</em>.</p></li> <li><p><strong>Example of imperative code:</strong></p></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">car </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> create_car()</span></span>
<span class="line"><span style="color:#FFF">car.add_gas(</span><span style="color:#FFC799">10</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">car.clean_windows()</span></span></code></pre> <ul><li><strong>Example of functional code:</strong></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">return</span><span style="color:#FFF"> clean_windows(add_gas(create_car()))</span></span></code></pre> <ul><li>In the functional example, we never change the value of the <code>car</code> variable, we just compose functions that return new values, with the outermost function, <code>clean_windows</code> in this case, returning the final result.</li></ul> <h3>Python is not the best for functional programming:</h3> <ul><li>Python is <em>not</em> the best language for functional programming. Reasons include:</li></ul> <ol><li>No <a href="https://developer.mozilla.org/en-US/docs/Glossary/Static_typing" rel="nofollow">static typing</a>.</li> <li>Everything is <a href="https://en.wikipedia.org/wiki/Immutable_object" rel="nofollow">mutable</a>.</li> <li>No <a href="https://exploringjs.com/es6/ch_tail-calls.html" rel="nofollow">tail call optimization</a>.</li> <li><a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)" rel="nofollow">Side effects</a> are common.</li> <li>Imperative and OOP styles abound in popular libraries.</li> <li><a href="https://en.wikipedia.org/wiki/Pure_function" rel="nofollow">Purity</a> is not enforced (and sometimes not even encouraged).</li> <li><a href="https://en.wikipedia.org/wiki/Algebraic_data_type" rel="nofollow">Sum Types</a> are hard to define.</li> <li><a href="https://en.wikipedia.org/wiki/Pattern_matching" rel="nofollow">Pattern matching</a> is weak at best.</li></ol> <p>So seriously, why are we using Python?</p> <ul><li>cause we already know it</li></ul> <h3>Immutability:</h3> <ul><li>In FP, we strive to make data <em><a href="https://en.wikipedia.org/wiki/Immutable_object" rel="nofollow">immutable</a></em>. Once a value is created, it cannot be changed. <em>Mutable</em> data, on the other hand, can be changed after it’s created.</li> <li>Why ? <ul><li>Immutable data is easier to think about and work with. When 10 different functions have access to the same variable, and you’re debugging a problem with that variable, you have to consider the possibility that any of those functions could have changed the value.</li> <li>When a variable is immutable, you can be sure that it hasn’t changed since it was created. It’s a helluva lot easier to work with.</li></ul></li> <li><em>Generally speaking, immutability means fewer bugs and more maintainable code.</em></li> <li>Tuples vs Lists <ul><li>Tuples and lists are both ordered collections of values, but tuples are <em>immutable</em> and lists are <em>mutable</em>.</li></ul></li> <li>You can append to a list, but you can <em>not</em> append to a tuple. You can create a <em>new copy</em> of a tuple using values from an existing tuple, but you can’t change the existing tuple.</li> <li>Lists are mutable</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">ages </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> [</span><span style="color:#FFC799">16</span><span style="color:#FFF">, </span><span style="color:#FFC799">21</span><span style="color:#FFF">, </span><span style="color:#FFC799">30</span><span style="color:#FFF">]</span></span>
<span class="line"><span style="color:#8B8B8B94"># 'ages' is being changed in place</span></span>
<span class="line"><span style="color:#FFF">ages.append(</span><span style="color:#FFC799">80</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># [16, 21, 30, 80]</span></span></code></pre> <ul><li>Tuples are immutable</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">ages </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> (</span><span style="color:#FFC799">16</span><span style="color:#FFF">, </span><span style="color:#FFC799">21</span><span style="color:#FFF">, </span><span style="color:#FFC799">30</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">more_ages </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> (</span><span style="color:#FFC799">80</span><span style="color:#FFF">,) </span><span style="color:#8B8B8B94"># note the comma! It's required for a single-element tuple</span></span>
<span class="line"><span style="color:#8B8B8B94"># 'all_ages' is a brand new tuple</span></span>
<span class="line"><span style="color:#FFF">all_ages </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> ages </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> more_ages</span></span>
<span class="line"><span style="color:#8B8B8B94"># (16, 21, 30, 80)</span></span></code></pre> <ul><li>Functional programming aims to be <em>declarative</em>. We prefer to declare <em>what</em> we want the computer to do, rather than muck around with the details of <em>how</em> to do it.</li> <li>Declarative Programming: <ul><li>It does <em>not</em> execute line-by-line like an imperative language. Instead, it simply declares the desired style, and it’s up to a web browser to figure out how to apply and display it.(CSS)</li></ul></li> <li>Unlike functional programming (and CSS), a lot of code is <em>imperative</em>. We write out the exact step-by-step implementation details. This Python script draws a red button on a screen using the <a href="https://docs.python.org/3/library/tkinter.html" rel="nofollow">Tkinter</a> library:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">from</span><span style="color:#FFF"> tkinter </span><span style="color:#A0A0A0">import</span><span style="color:#A0A0A0"> *</span><span style="color:#8B8B8B94"> # first, import the library</span></span>
<span class="line"><span style="color:#FFF">master </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> Tk() </span><span style="color:#8B8B8B94"># create a window</span></span>
<span class="line"><span style="color:#FFF">master.geometry(</span><span style="color:#99FFE4">"200x100"</span><span style="color:#FFF">) </span><span style="color:#8B8B8B94"># set the window size</span></span>
<span class="line"><span style="color:#FFF">button </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> Button(master, text</span><span style="color:#A0A0A0">=</span><span style="color:#99FFE4">"Submit"</span><span style="color:#FFF">, fg</span><span style="color:#A0A0A0">=</span><span style="color:#99FFE4">"red"</span><span style="color:#FFF">).pack() </span><span style="color:#8B8B8B94"># create a button</span></span>
<span class="line"><span style="color:#FFF">master.mainloop() </span><span style="color:#8B8B8B94"># start the event loop</span></span></code></pre> <h3>It’s just math:</h3> <ul><li>Functional programming tends to be popular amongst developers with a strong mathematical background. After all, a math equation isn’t procedural: it’s declarative. Take the following math equation:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span>	avg = Σx/N</span></span></code></pre> <ul><li><p>To put this calculation in plain English:</p> <ol><li><code>Σ</code> is just the Greek letter <a href="https://en.wikipedia.org/wiki/Sigma" rel="nofollow">Sigma</a>, and it represents “the <a href="https://en.wikipedia.org/wiki/Summation" rel="nofollow">sum</a> of a collection”.</li> <li><code>x</code> is the collection of numbers we’re averaging.</li> <li><code>N</code> is the number of elements in the collection.</li> <li><code>avg</code> is equal to the sum of all the numbers in collection “x” divided by the number of elements in collection “x”.</li></ol></li> <li><p>So, the equation really just says that <code>avg</code> is the average of all the numbers in collection “x”. This math equation is a <em>declarative</em> way of writing “calculate the average of a list of numbers”. Here’s some <em>imperative Python code</em> that does the same thing:</p></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> get_average</span><span style="color:#FFF">(nums):</span></span>
<span class="line"><span style="color:#FFF">    total </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 0</span></span>
<span class="line"><span style="color:#A0A0A0">    for</span><span style="color:#FFF"> num </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> nums:</span></span>
<span class="line"><span style="color:#FFF">        total </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> num</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> total </span><span style="color:#A0A0A0">/</span><span style="color:#FFC799"> len</span><span style="color:#FFF">(nums)</span></span></code></pre> <ul><li>with functional programming, we would write code that’s <em>a bit more</em> declarative:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> get_average</span><span style="color:#FFF">(nums):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFC799"> sum</span><span style="color:#FFF">(nums) </span><span style="color:#A0A0A0">/</span><span style="color:#FFC799"> len</span><span style="color:#FFF">(nums)</span></span></code></pre> <h3>Classes vs Functions:</h3> <ul><li>I run into new developers who, after learning about classes, want to use them <em>everywhere</em>. They assume that because they learned about functions first, functions are somehow inferior.</li> <li><strong>If you’re unsure, default to functions.</strong> I find myself reaching for classes when I need something long-lived and stateful that would be easier to model if I could share behavior <em>and data structure</em> via inheritance. This is often the case for: <ul><li>Video games</li> <li>Simulations</li> <li>GUIs</li></ul></li> <li>The difference is: <blockquote><p><strong>Classes</strong> encourage you to think about the world as a hierarchical collection of objects. Objects bundle behavior, data, and state together in a way that draws boundaries between instances of things, like chess pieces on a board.</p></blockquote></li></ul> <blockquote><p><strong>Functions</strong> encourage you to think about the world as a series of data transformations. Functions take data as input and return a transformed output. For example, a function might take the entire state of a chess board and a move as inputs, and return the new state of the board as output.</p></blockquote> <h3>Debugging FP:</h3> <ul><li>Need to paruse code for debugging.</li></ul> <h3>Functional vs OOP:</h3> <ul><li>Functional programming and object-oriented programming are <strong>styles for writing code</strong>. One isn’t inherently superior to the other, but to be a well-rounded developer you should understand both well and use ideas from each when appropriate.</li> <li>You’ll encounter developers who love functional programming and others who love object-oriented programming. However, contrary to popular opinion, FP and OOP are <em>not</em> always at odds with one another. They aren’t opposites. Of the four pillars of OOP, <a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)" rel="nofollow">inheritance</a> is the only one that doesn’t fit with functional programming.</li> <li>Inheritance isn’t seen in functional code due to the mutable classes that come along with it. Encapsulation, polymorphism and abstraction are still used all the time in functional programming.</li></ul> <h3>Functions as Values:</h3> <ul><li>In Python, functions are just values, like strings, integers, or objects. For example, we can assign an existing function to a variable:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> add</span><span style="color:#FFF">(x, y):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B8B8B94"># assign the function to a new variable</span></span>
<span class="line"><span style="color:#8B8B8B94"># called "addition". It behaves the same</span></span>
<span class="line"><span style="color:#8B8B8B94"># as the original "add" function</span></span>
<span class="line"><span style="color:#FFF">addition </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> add</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(addition(</span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">5</span><span style="color:#FFF">))</span></span></code></pre> <h3>Anonymous Functions:</h3> <ul><li>Anonymous functions have <em>no name</em>, and in Python, they’re called <a href="https://docs.python.org/3/reference/expressions.html#lambda" rel="nofollow">lambda functions</a> after <a href="https://en.wikipedia.org/wiki/Lambda_calculus" rel="nofollow">lambda calculus</a>. Here’s a lambda function that takes a single argument <code>x</code> and returns the result of <code>x + 1</code>:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">lambda</span><span style="color:#FFF"> x: x </span><span style="color:#A0A0A0">+</span><span style="color:#FFC799"> 1</span></span></code></pre> <ul><li>Notice that the <a href="https://docs.python.org/3/reference/expressions.html#expressions" rel="nofollow">expression</a> <code>x + 1</code> is returned <em>automatically</em>, no need for a <code>return</code> statement. And because functions are just values, we can assign the function to a variable named <code>add_one</code>:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">add_one </span><span style="color:#A0A0A0">=</span><span style="color:#A0A0A0"> lambda</span><span style="color:#FFF"> x: x </span><span style="color:#A0A0A0">+</span><span style="color:#FFC799"> 1</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(add_one(</span><span style="color:#FFC799">2</span><span style="color:#FFF">))</span></span></code></pre> <ul><li>Because they simply return the result of an expression, they’re often used for small, simple evaluations. Here’s an example that uses a lambda to get a value from a dictionary:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">get_age </span><span style="color:#A0A0A0">=</span><span style="color:#A0A0A0"> lambda</span><span style="color:#FFF"> name: {</span></span>
<span class="line"><span style="color:#99FFE4">    "lane"</span><span style="color:#FFF">: </span><span style="color:#FFC799">29</span><span style="color:#FFF">,</span></span>
<span class="line"><span style="color:#99FFE4">    "hunter"</span><span style="color:#FFF">: </span><span style="color:#FFC799">69</span><span style="color:#FFF">,</span></span>
<span class="line"><span style="color:#99FFE4">    "allan"</span><span style="color:#FFF">: </span><span style="color:#FFC799">17</span></span>
<span class="line"><span style="color:#FFF">}.get(name, </span><span style="color:#99FFE4">"not found"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(get_age(</span><span style="color:#99FFE4">"lane"</span><span style="color:#FFF">))</span></span></code></pre> <h3>First Class and Higher Order Functions:</h3> <ul><li>A programming language “supports first-class functions” when functions are treated like any other variable. That means functions can be passed as arguments to other functions, can be returned by other functions, and can be assigned to variables.</li> <li><strong>First-class function:</strong> A function that is treated like any other value</li> <li><strong>Higher-order function:</strong> A function that accepts another function as an argument or returns a function</li> <li>Python supports first-class and higher-order functions.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> square</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">*</span><span style="color:#FFF"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B8B8B94"># Assign function to a variable</span></span>
<span class="line"><span style="color:#FFF">f </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> square</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(f(</span><span style="color:#FFC799">5</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># 25</span></span></code></pre> <ul><li>Higher Order Example:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> square</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">*</span><span style="color:#FFF"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> my_map</span><span style="color:#FFF">(func, arg_list):</span></span>
<span class="line"><span style="color:#FFF">    result </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> []</span></span>
<span class="line"><span style="color:#A0A0A0">    for</span><span style="color:#FFF"> i </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> arg_list:</span></span>
<span class="line"><span style="color:#FFF">        result.append(func(i))</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> result</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">squares </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> my_map(square, [</span><span style="color:#FFC799">1</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">4</span><span style="color:#FFF">, </span><span style="color:#FFC799">5</span><span style="color:#FFF">])</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(squares)</span></span>
<span class="line"><span style="color:#8B8B8B94"># [1, 4, 9, 16, 25]</span></span></code></pre> <h3>Map:</h3> <ul><li>“Map”, “filter”, and “reduce” are three commonly used <a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="nofollow">higher-order functions</a> in functional programming.</li> <li>In Python, the built-in <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow">map</a> function takes a function and an <a href="https://docs.python.org/3/glossary.html#term-iterable" rel="nofollow">iterable</a> (in this case a list) as inputs. It returns an iterator that applies the function to every item, yielding the results.</li> <li>With map, we can operate on lists without using loops and nasty stateful variables.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> square</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">*</span><span style="color:#FFF"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">nums </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> [</span><span style="color:#FFC799">1</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">4</span><span style="color:#FFF">, </span><span style="color:#FFC799">5</span><span style="color:#FFF">]</span></span>
<span class="line"><span style="color:#FFF">squared_nums </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> map</span><span style="color:#FFF">(square, nums)</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(</span><span style="color:#FFC799">list</span><span style="color:#FFF">(squared_nums))</span></span>
<span class="line"><span style="color:#8B8B8B94"># [1, 4, 9, 16, 25]</span></span></code></pre> <ul><li>The <a href="https://docs.python.org/3/library/stdtypes.html#list" rel="nofollow">list type constructor</a>, <code>list()</code> converts the <code>map</code> object back into a standard list.</li></ul> <h3>Filter:</h3> <ul><li>The built-in <a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow">filter</a> function takes a function and an iterable (in this case a list) and returns a <em>new</em> iterable that only contains elements from the original iterable where the result of the function on that item returned <code>True</code>.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> is_even</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">%</span><span style="color:#FFC799"> 2</span><span style="color:#A0A0A0"> ==</span><span style="color:#FFC799"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">numbers </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> [</span><span style="color:#FFC799">1</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">4</span><span style="color:#FFF">, </span><span style="color:#FFC799">5</span><span style="color:#FFF">, </span><span style="color:#FFC799">6</span><span style="color:#FFF">]</span></span>
<span class="line"><span style="color:#FFF">evens </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> list</span><span style="color:#FFF">(</span><span style="color:#FFC799">filter</span><span style="color:#FFF">(is_even, numbers))</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(evens)</span></span>
<span class="line"><span style="color:#8B8B8B94"># [2, 4, 6]</span></span></code></pre> <h3>Reduce:</h3> <ul><li>The built-in <a href="https://docs.python.org/3/library/functools.html#functools.reduce" rel="nofollow">functools.reduce()</a> function takes a function and a list of values, and applies the function to each value in the list, <em>accumulating a single result</em> as it goes.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#8B8B8B94"># import functools from the standard library</span></span>
<span class="line"><span style="color:#A0A0A0">import</span><span style="color:#FFF"> functools</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> add</span><span style="color:#FFF">(sum_so_far, x):</span></span>
<span class="line"><span style="color:#FFC799">    print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"sum_so_far: </span><span style="color:#FFC799">{</span><span style="color:#FFF">sum_so_far</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">, x: </span><span style="color:#FFC799">{</span><span style="color:#FFF">x</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> sum_so_far </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">numbers </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> [</span><span style="color:#FFC799">1</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">4</span><span style="color:#FFF">]</span></span>
<span class="line"><span style="color:#FFC799">sum</span><span style="color:#A0A0A0"> =</span><span style="color:#FFF"> functools.reduce(add, numbers)</span></span>
<span class="line"><span style="color:#8B8B8B94"># sum_so_far: 1, x: 2</span></span>
<span class="line"><span style="color:#8B8B8B94"># sum_so_far: 3, x: 3</span></span>
<span class="line"><span style="color:#8B8B8B94"># sum_so_far: 6, x: 4</span></span>
<span class="line"><span style="color:#8B8B8B94"># 10 doesn't print, it's just the final result</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(</span><span style="color:#FFC799">sum</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># 10</span></span></code></pre> <h3>zip:</h3> <ul><li><a href="https://docs.python.org/3/library/functions.html#zip" rel="nofollow">zip</a> function takes two iterables (in this case lists), and returns a <em>new</em> iterable where each element is a tuple containing one element from each of the original iterables.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">a </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> [</span><span style="color:#FFC799">1</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">3</span><span style="color:#FFF">]</span></span>
<span class="line"><span style="color:#FFF">b </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> [</span><span style="color:#FFC799">4</span><span style="color:#FFF">, </span><span style="color:#FFC799">5</span><span style="color:#FFF">, </span><span style="color:#FFC799">6</span><span style="color:#FFF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">c </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> list</span><span style="color:#FFF">(</span><span style="color:#FFC799">zip</span><span style="color:#FFF">(a, b))</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(c)</span></span>
<span class="line"><span style="color:#8B8B8B94"># [(1, 4), (2, 5), (3, 6)]</span></span></code></pre> <h3>Pure Functions:</h3> <ul><li>If you take nothing else away from this course, <em>please</em> take this: <strong><a href="https://en.wikipedia.org/wiki/Pure_function" rel="nofollow">Pure functions</a> are fantastic.</strong> They have two properties: <ul><li>They <em>always</em> return the same value given the same arguments.</li> <li>Running them causes no side effects</li></ul></li> <li>In short: <strong>pure functions don’t do anything with anything that exists outside of their scope.</strong></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> find_max</span><span style="color:#FFF">(nums):</span></span>
<span class="line"><span style="color:#FFF">	max_val </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> float</span><span style="color:#FFF">(</span><span style="color:#99FFE4">"-inf"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#A0A0A0">	for</span><span style="color:#FFF"> num </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> nums:</span></span>
<span class="line"><span style="color:#A0A0A0">		if</span><span style="color:#FFF"> max_val </span><span style="color:#A0A0A0">&lt;</span><span style="color:#FFF"> num:</span></span>
<span class="line"><span style="color:#FFF">			max_val </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> num</span></span>
<span class="line"><span style="color:#A0A0A0">	return</span><span style="color:#FFF"> max_val</span></span></code></pre> <h3>Reference vs Value:</h3> <ul><li>When you pass a value into a function as an argument, one of two things can happen: <ul><li>It’s passed by <strong>reference</strong>: The function has access to the original value and can change it</li> <li>It’s passed by <strong>value</strong>: The function only has access to a copy. Changes to the copy within the function don’t affect the original</li></ul></li> <li>There is a bit more nuance, but this explanation mostly works.</li> <li>These types are passed by <strong>reference</strong>: <ul><li>Lists</li> <li>Dictionaries</li> <li>Sets</li></ul></li> <li>These types are passed by <strong>value</strong>: <ul><li>Integers</li> <li>Floats</li> <li>Strings</li> <li>Booleans</li> <li>Tuples</li></ul></li> <li>Most collection types are passed by reference (except for tuples) and most primitive types are passed by value.</li> <li>Simply assigning a new variable to an existing dictionary doesn’t copy that dictionary, it points to the same dictonary. Instead use the <a href="https://docs.python.org/3/library/copy.html" rel="nofollow">.copy()</a> method to create a new copy of a dictionary.</li></ul> <h3>Input and Output:</h3> <ul><li><p>The term “i/o” stands for input/output. In the context of writing programs, i/o refers to anything in our code that interacts with the “outside world”. “Outside world” just means anything that’s not stored in our application’s memory (like variables).</p></li> <li><p>Examples of I/O:</p> <ul><li>Reading form or writing to a file on the hard drive.</li> <li>Accessing the internet</li> <li>Reading from or writing to a database</li> <li>Even simply printing to the console is considered i/o.</li></ul></li> <li><p>In functional programming, i/o is viewed as <em>dirty</em> but <em>necessary</em>. We know we can’t <em>eliminate</em> i/o from our code, so we just <em>contain</em> it as much as possible. There should be a clear place in your project that does nasty i/o stuff, and the rest of your code can be pure.</p></li> <li><p>For example, a Python program might:</p> <ol><li>Read a file from the hard drive as the program starts</li> <li>Run a bunch of pure functions to analyze the data</li> <li>Write the results of the analysis to a file on the hard drive at the end</li></ol></li></ul> <h3>No-op:</h3> <ul><li>A <a href="https://en.wikipedia.org/wiki/NOP_(code)" rel="nofollow">no-op</a> is an operation that does… nothing.</li> <li>If a function doesn’t return anything, it’s probably impure. If it doesn’t return anything, the only reason for it to exist is to perform a side effect.</li> <li>This function performs a useless computation because it doesn’t return anything or perform a side-effect. It’s a no-op.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> square</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#FFF">    x </span><span style="color:#A0A0A0">*</span><span style="color:#FFF"> x</span></span></code></pre> <ul><li>This function performs a side effect. It changes the value of the <code>y</code> variable that is outside of its scope. It’s impure.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">y </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 5</span></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> add_to_y</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#A0A0A0">    global</span><span style="color:#FFF"> y</span></span>
<span class="line"><span style="color:#FFF">    y </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">add_to_y(</span><span style="color:#FFC799">3</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># y = 8</span></span></code></pre> <ul><li>The <a href="https://docs.python.org/3/reference/simple_stmts.html#global" rel="nofollow"><code>global</code></a> keyword just tells Python to allow access to the outer-scoped <code>y</code> variable.</li></ul> <h3>Memoization:</h3> <ul><li>At its core, <a href="https://en.wikipedia.org/wiki/Memoization" rel="nofollow">memoization</a> is just <a href="https://en.wikipedia.org/wiki/Cache_(computing)" rel="nofollow">caching</a> (storing a copy of) the result of a computation so that we don’t have to compute it again in the future.</li> <li>For example, take this simple function:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> add</span><span style="color:#FFF">(x, y):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> y</span></span></code></pre> <ul><li>A call to <code>add(5, 7)</code> will <em>always</em> evaluate to <code>12</code>. So, if you think about it, once we know that <code>add(5, 7)</code> can be replaced with <code>12</code>, we can just store the value <code>12</code> somewhere in memory so that we don’t have to do the addition operation again in the future. Then, if we need to <code>add(5, 7)</code> again, we can just look up the value <code>12</code> instead of doing a (potentially expensive) CPU operation.</li> <li>The slower and more complex the function, the more memoization can help speed things up.</li> <li><em>Note: It’s pronounced “memOization”, not “memORization”. This confused me for quite a while in college, I thought my professor just didn’t speak goodly..</em></li></ul> <h3>Referential Transparency:</h3> <ul><li>Pure functions are always <a href="https://www.baeldung.com/cs/referential-transparency#referential-transparency" rel="nofollow">referentially transparent</a>.</li> <li>“Referential transparency” is a fancy way of saying that a function call can be replaced by its would-be return value because it’s the same every time. <strong>Referentially transparent functions can be safely memoized.</strong> For example <code>add(2, 3)</code> can be smartly replaced by the value <code>5</code>.</li> <li>The great thing about pure functions is that they can always be <em>safely</em> memoized. Impure functions can’t be because they might do something in addition to returning a static value, or they might return different values given the same arguments.</li> <li>No! Memoization is a <em>tradeoff</em> between memory and speed. If your function is fast to execute, it’s probably not worth memoizing, because the amount of RAM (memory) your program will need to store the results will go way up.</li> <li>It’s also a bunch of extra code to write, so you should only do it if you have a good reason to.</li></ul> <h3>Recursion:</h3> <ul><li><a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)" rel="nofollow">Recursion</a> is a famously tricky concept to grasp, but it’s honestly quite simple - don’t let it intimidate you! A recursive function is just a function that calls itself!</li></ul> <blockquote><p>Recursion is the process of defining something in terms of itself.</p></blockquote> <ul><li>If you thought loops were the only way to iterate over a list, you were wrong! Recursion is fundamental to functional programming because it’s how we iterate over lists while avoiding stateful loops. Take a look at this function that sums the numbers in a list:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> sum_nums</span><span style="color:#FFF">(nums):</span></span>
<span class="line"><span style="color:#A0A0A0">    if</span><span style="color:#FFC799"> len</span><span style="color:#FFF">(nums) </span><span style="color:#A0A0A0">==</span><span style="color:#FFC799"> 0</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFC799"> 0</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> nums[</span><span style="color:#FFC799">0</span><span style="color:#FFF">] </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> sum_nums(nums[</span><span style="color:#FFC799">1</span><span style="color:#FFF">:])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(sum_nums([</span><span style="color:#FFC799">1</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">, </span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">4</span><span style="color:#FFF">, </span><span style="color:#FFC799">5</span><span style="color:#FFF">]))</span></span>
<span class="line"><span style="color:#8B8B8B94"># 15</span></span></code></pre> <ul><li><p>Steps: - Solve a small problem : - Our goal is to sum all the numbers in a list, but we’re not allowed to loop. So, we start by solving the smallest possible problem: summing the first number in the list with the rest of the list:</p> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"></span>
<span class="line"><span style="color:#A0A0A0">return</span><span style="color:#FFF"> nums[</span><span style="color:#FFC799">0</span><span style="color:#FFF">] </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> sum_nums(nums[</span><span style="color:#FFC799">1</span><span style="color:#FFF">:])</span></span>
<span class="line"></span></code></pre> <ul><li>Recurse   : <ul><li>So, what actually happens when we call <code>sum_nums(nums[1:])</code>? Well, we’re just calling <code>sum_nums</code> with a smaller list! In the first call, the <code>nums</code> input was <code>[1, 2, 3, 4, 5]</code>, but in the next call it’s just <code>[2, 3, 4, 5]</code>. We just keep calling <code>sum_nums</code> with smaller and smaller lists.</li></ul></li> <li>The base case : <ul><li>So what happens when we get to the “end”? <code>sum_nums(nums[1:])</code> is called, but <code>nums[1:]</code> is an empty list because we ran out of numbers. We need to write a base case to stop the madness.</li></ul></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span></span></span></code></pre></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">if</span><span style="color:#FFC799"> len</span><span style="color:#FFF">(nums) </span><span style="color:#A0A0A0">==</span><span style="color:#FFC799"> 0</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFC799"> 0</span></span></code></pre> <ul><li>recursively add the size of the items of a fs clone:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> sum_nested_list</span><span style="color:#FFF">(lst):</span></span>
<span class="line"><span style="color:#FFF">    total_size </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 0</span></span>
<span class="line"><span style="color:#A0A0A0">    for</span><span style="color:#FFF"> item </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> lst:</span></span>
<span class="line"><span style="color:#A0A0A0">        if</span><span style="color:#FFC799"> isinstance</span><span style="color:#FFF">(item,</span><span style="color:#FFC799">int</span><span style="color:#FFF">):</span></span>
<span class="line"><span style="color:#FFF">            total_size </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> item</span></span>
<span class="line"><span style="color:#A0A0A0">        else</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#FFF">            total_size </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> sum_nested_list(item)</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> total_size</span></span></code></pre> <ul><li>Recursion is <em>so dang useful</em> with tree-like structures because we don’t always know how deep they’re nested. Stop and think about how you would write nested loops to traverse a tree of arbitrary depth… it’s not easy, is it?</li></ul> <h3>Dangers of Recursion:</h3> <ul><li>Recursion is great because it’s simple and elegant, often being the most straightforward way to solve a problem. But there are some things to watch out for: <ol><li><strong>Stack Overflow</strong>: Each function call requires a bit of memory. So, if you recurse too deeply, you can run out of <a href="https://en.wikipedia.org/wiki/Stack-based_memory_allocation" rel="nofollow">“stack” memory</a> which will crash your program. (This is what the famous <a href="https://stackoverflow.com/" rel="nofollow">website</a> is named after)</li> <li>If you don’t have a solid base case, you can end up in an infinite loop (which will likely lead to a stack overflow).</li> <li>Recursion (especially in a language like Python) is often slower than a <code>for</code> loop because each function call requires some memory. <a href="https://exploringjs.com/es6/ch_tail-calls.html" rel="nofollow">Tail call optimization</a> can help with this, but Python doesn’t support it.</li></ol> <ul><li>Recursive String Reversal:</li></ul></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">	def</span><span style="color:#FFC799"> recurse_reverse_string</span><span style="color:#FFF">(s,k):</span></span>
<span class="line"><span style="color:#A0A0A0">    if</span><span style="color:#FFF"> k </span><span style="color:#A0A0A0">&lt;</span><span style="color:#FFC799"> 1</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#99FFE4"> ''</span></span>
<span class="line"><span style="color:#FFF">    rev_string </span><span style="color:#A0A0A0">=</span><span style="color:#99FFE4"> ""</span></span>
<span class="line"><span style="color:#A0A0A0">    if</span><span style="color:#FFF"> k </span><span style="color:#A0A0A0">==</span><span style="color:#FFC799"> 1</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFF"> s[</span><span style="color:#FFC799">0</span><span style="color:#FFF">]</span></span>
<span class="line"><span style="color:#A0A0A0">    else</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFF"> s[k</span><span style="color:#A0A0A0">-</span><span style="color:#FFC799">1</span><span style="color:#FFF">] </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> recurse_reverse_string(s,k</span><span style="color:#A0A0A0">-</span><span style="color:#FFC799">1</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#A0A0A0">	def</span><span style="color:#FFC799"> reverse_string</span><span style="color:#FFF">(s):</span></span>
<span class="line"><span style="color:#A0A0A0">	    return</span><span style="color:#FFF"> recurse_reverse_string(s,</span><span style="color:#FFC799">len</span><span style="color:#FFF">(s))</span></span></code></pre> <h3>Function Transformations:</h3> <ul><li>“Function transformation” is just a more concise way to describe a specific type of <a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="nofollow">higher order function</a>. It’s when a function takes a function (or functions) as input and returns a <em>new</em> function.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> multiply</span><span style="color:#FFF">(x, y):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">*</span><span style="color:#FFF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> add</span><span style="color:#FFF">(x, y):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> x </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B8B8B94"># self_math is a higher order function</span></span>
<span class="line"><span style="color:#8B8B8B94"># input: a function that takes two arguments and returns a value</span></span>
<span class="line"><span style="color:#8B8B8B94"># output: a new function that takes one argument and returns a value</span></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> self_math</span><span style="color:#FFF">(math_func):</span></span>
<span class="line"><span style="color:#A0A0A0">    def</span><span style="color:#FFC799"> inner_func</span><span style="color:#FFF">(x):</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFF"> math_func(x, x)</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> inner_func</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">square_func </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> self_math(multiply)</span></span>
<span class="line"><span style="color:#FFF">double_func </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> self_math(add)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(square_func(</span><span style="color:#FFC799">5</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># prints 25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(double_func(</span><span style="color:#FFC799">5</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># prints 10</span></span></code></pre> <ul><li><p>Why Function Transformations:</p> <ul><li>“When would I use function transformations in the real world?”</li> <li>“Isn’t it simpler to just define functions at the top level of the code, and call them as needed?”</li></ul></li> <li><p>Good questions. To be clear, we don’t just transform functions at <a href="https://en.wikipedia.org/wiki/Execution_(computing)#Runtime" rel="nofollow">runtime</a> for the fun of it! We only use advanced techniques like function transformations when they make our code <em>simpler than it would otherwise be</em>.</p></li></ul> <h3>Code Reusability</h3> <ul><li>Creating variations of the same function dynamically can make it a lot easier to share common functionality. Take a look at this <code>formatter</code> function. It accepts a “pattern” and returns a new function that formats text according to that pattern:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> formatter</span><span style="color:#FFF">(pattern):</span></span>
<span class="line"><span style="color:#A0A0A0">    def</span><span style="color:#FFC799"> inner_func</span><span style="color:#FFF">(text):</span></span>
<span class="line"><span style="color:#FFF">        result </span><span style="color:#A0A0A0">=</span><span style="color:#99FFE4"> ""</span></span>
<span class="line"><span style="color:#FFF">        i </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 0</span></span>
<span class="line"><span style="color:#A0A0A0">        while</span><span style="color:#FFF"> i </span><span style="color:#A0A0A0">&lt;</span><span style="color:#FFC799"> len</span><span style="color:#FFF">(pattern):</span></span>
<span class="line"><span style="color:#A0A0A0">            if</span><span style="color:#FFF"> pattern[i:i</span><span style="color:#A0A0A0">+</span><span style="color:#FFC799">2</span><span style="color:#FFF">] </span><span style="color:#A0A0A0">==</span><span style="color:#99FFE4"> '</span><span style="color:#FFC799">{}</span><span style="color:#99FFE4">'</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#FFF">                result </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> text</span></span>
<span class="line"><span style="color:#FFF">                i </span><span style="color:#A0A0A0">+=</span><span style="color:#FFC799"> 2</span></span>
<span class="line"><span style="color:#A0A0A0">            else</span><span style="color:#FFF">:</span></span>
<span class="line"><span style="color:#FFF">                result </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> pattern[i]</span></span>
<span class="line"><span style="color:#FFF">                i </span><span style="color:#A0A0A0">+=</span><span style="color:#FFC799"> 1</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFF"> result</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> inner_func</span></span></code></pre> <ul><li>Now we can create new formatters easily:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">bold_formatter </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> formatter(</span><span style="color:#99FFE4">"**</span><span style="color:#FFC799">{}</span><span style="color:#99FFE4">**"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">italic_formatter </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> formatter(</span><span style="color:#99FFE4">"*</span><span style="color:#FFC799">{}</span><span style="color:#99FFE4">*"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">bullet_point_formatter </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> formatter(</span><span style="color:#99FFE4">"* </span><span style="color:#FFC799">{}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span></code></pre> <ul><li>And use them like this:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(bold_formatter(</span><span style="color:#99FFE4">"Hello"</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># **Hello**</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(italic_formatter(</span><span style="color:#99FFE4">"Hello"</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># *Hello*</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(bullet_point_formatter(</span><span style="color:#99FFE4">"Hello"</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># * Hello</span></span></code></pre> <h3>Closures:</h3> <ul><li>A <a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)" rel="nofollow">closure</a> is a function that references variables from outside its own function body. The function definition <em>and its environment</em> are bundled together into a single entity.</li> <li>Put simply, a closure is just a function that <strong>keeps track of some values</strong> from the place where it was <em>defined</em>, no matter where it is executed later on.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> concatter</span><span style="color:#FFF">():</span></span>
<span class="line"><span style="color:#FFF">	doc </span><span style="color:#A0A0A0">=</span><span style="color:#99FFE4"> ""</span></span>
<span class="line"><span style="color:#A0A0A0">	def</span><span style="color:#FFC799"> doc_builder</span><span style="color:#FFF">(word):</span></span>
<span class="line"><span style="color:#8B8B8B94">		# "nonlocal" tells Python to use the 'doc'</span></span>
<span class="line"><span style="color:#8B8B8B94">		# variable from the enclosing scope</span></span>
<span class="line"><span style="color:#A0A0A0">		nonlocal</span><span style="color:#FFF"> doc</span></span>
<span class="line"><span style="color:#FFF">		doc </span><span style="color:#A0A0A0">+=</span><span style="color:#FFF"> word </span><span style="color:#A0A0A0">+</span><span style="color:#99FFE4"> " "</span></span>
<span class="line"><span style="color:#A0A0A0">		return</span><span style="color:#FFF"> doc</span></span>
<span class="line"><span style="color:#A0A0A0">	return</span><span style="color:#FFF"> doc_builder</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B8B8B94"># save the returned 'doc_builder' function</span></span>
<span class="line"><span style="color:#8B8B8B94"># to the new function 'harry_potter_aggregator'</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> concatter()</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"Mr."</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"and"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"Mrs."</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"Dursley"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"of"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"number"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"four,"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">harry_potter_aggregator(</span><span style="color:#99FFE4">"Privet"</span><span style="color:#FFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(harry_potter_aggregator(</span><span style="color:#99FFE4">"Drive"</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># Mr. and Mrs. Dursley of number four, Privet Drive</span></span></code></pre> <ul><li>Python has a keyword called <a href="https://docs.python.org/3/reference/simple_stmts.html#nonlocal" rel="nofollow">nonlocal</a> that’s required to modify a variable from an enclosing scope. Most programming languages don’t require this keyword, but Python does.</li> <li>The whole point of a closure is that it’s <em>stateful</em>. It’s a function that “remembers” the values from the enclosing scope even after the enclosing scope has finished executing.</li> <li>It’s as if you’re saving the state of a function at a particular point in time, and then you can use and update that state later on.</li> <li>When not to use the <code>nonlocal</code> keyword: when the variable is mutable (such as a list, dictionary or set), and you are modifying its contents rather than reassigning the variable. You only need the <code>nonlocal</code> keyword if you are reassigning a variable instead of modifying its contents (which you must do to change immutable values such as strings and integers).</li></ul> <h3>Currying:</h3> <ul><li>Function <a href="https://en.wikipedia.org/wiki/Currying" rel="nofollow">currying</a> is a specific <em>kind</em> of function transformation where we translate a single function that accepts multiple arguments into <em>multiple</em> functions that each accept a <em>single</em> argument.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> sum</span><span style="color:#FFF">(a):</span></span>
<span class="line"><span style="color:#A0A0A0">  def</span><span style="color:#FFC799"> inner_sum</span><span style="color:#FFF">(b):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> a </span><span style="color:#A0A0A0">+</span><span style="color:#FFF"> b</span></span>
<span class="line"><span style="color:#A0A0A0">  return</span><span style="color:#FFF"> inner_sum</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(</span><span style="color:#FFC799">sum</span><span style="color:#FFF">(</span><span style="color:#FFC799">1</span><span style="color:#FFF">)(</span><span style="color:#FFC799">2</span><span style="color:#FFF">))</span></span>
<span class="line"><span style="color:#8B8B8B94"># prints 3</span></span></code></pre> <ul><li>The <code>sum</code> function only takes a <em>single</em> input, <code>a</code>. It returns a <em>new</em> function that takes a single input, <code>b</code>. This new function when called with a value for <code>b</code> will return the sum of <code>a</code> and <code>b</code>. <em>We’ll talk later about why this is useful.</em></li></ul> <h3>Why Curry ?</h3> <ul><li>Well, currying is often used to <strong>change a function’s signature</strong> to make it conform to a specific shape. For example:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> colorize</span><span style="color:#FFF">(converter, doc):</span></span>
<span class="line"><span style="color:#8B8B8B94">  # ...</span></span>
<span class="line"><span style="color:#FFF">  converter(doc)</span></span>
<span class="line"><span style="color:#8B8B8B94">  # ...</span></span></code></pre> <ul><li><code>colorize</code> function accepts a function called <code>converter</code> as input, and at some point during its execution, it calls <code>converter</code> with a single argument. That means that it expects <code>converter</code> to accept exactly one argument. So, if I have a conversion function like this:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> markdown_to_html</span><span style="color:#FFF">(doc, asterisk_style):</span></span>
<span class="line"><span style="color:#8B8B8B94">  # ...</span></span></code></pre> <ul><li>I can’t pass <code>markdown_to_html</code> to <code>colorize</code> because <code>markdown_to_html</code> wants <em>two</em> arguments. To solve this problem, I can curry <code>markdown_to_html</code> into a function that takes a single argument:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> markdown_to_html</span><span style="color:#FFF">(asterisk_style):</span></span>
<span class="line"><span style="color:#A0A0A0">  def</span><span style="color:#FFC799"> asterisk_md_to_html</span><span style="color:#FFF">(doc):</span></span>
<span class="line"><span style="color:#8B8B8B94">    # do stuff with doc and asterisk_style...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A0A0">  return</span><span style="color:#FFF"> asterisk_md_to_html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">markdown_to_html_italic </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> markdown_to_html(</span><span style="color:#99FFE4">'italic'</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">colorize(markdown_to_html_italic, doc)</span></span></code></pre> <h3>Decorators:</h3> <ul><li><a href="https://book.pythontips.com/en/latest/decorators.html" rel="nofollow">Python decorators</a> are just <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" rel="nofollow">syntactic sugar</a> for <a href="https://en.wikipedia.org/wiki/Higher-order_function" rel="nofollow">higher-order functions</a>.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> vowel_counter</span><span style="color:#FFF">(func_to_decorate):</span></span>
<span class="line"><span style="color:#FFF">    vowel_count </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 0</span></span>
<span class="line"><span style="color:#A0A0A0">    def</span><span style="color:#FFC799"> wrapper</span><span style="color:#FFF">(doc):</span></span>
<span class="line"><span style="color:#A0A0A0">        nonlocal</span><span style="color:#FFF"> vowel_count</span></span>
<span class="line"><span style="color:#FFF">        vowels </span><span style="color:#A0A0A0">=</span><span style="color:#99FFE4"> "aeiou"</span></span>
<span class="line"><span style="color:#A0A0A0">        for</span><span style="color:#FFF"> char </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> doc:</span></span>
<span class="line"><span style="color:#A0A0A0">            if</span><span style="color:#FFF"> char </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> vowels:</span></span>
<span class="line"><span style="color:#FFF">                vowel_count </span><span style="color:#A0A0A0">+=</span><span style="color:#FFC799"> 1</span></span>
<span class="line"><span style="color:#FFC799">        print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Vowel count: </span><span style="color:#FFC799">{</span><span style="color:#FFF">vowel_count</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFF"> func_to_decorate(doc)</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFC799">@vowel_counter</span></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> process_doc</span><span style="color:#FFF">(doc):</span></span>
<span class="line"><span style="color:#FFC799">    print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Document: </span><span style="color:#FFC799">{</span><span style="color:#FFF">doc</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">process_doc(</span><span style="color:#99FFE4">"What"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># Vowel count: 1</span></span>
<span class="line"><span style="color:#8B8B8B94"># Document: What</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">process_doc(</span><span style="color:#99FFE4">"a wonderful"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># Vowel count: 5</span></span>
<span class="line"><span style="color:#8B8B8B94"># Document: a wonderful</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">process_doc(</span><span style="color:#99FFE4">"world"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># Vowel count: 6</span></span>
<span class="line"><span style="color:#8B8B8B94"># Document: world</span></span></code></pre> <ul><li><code>@vowel_counter</code> line is “decorating” the <code>process_doc</code> function with the <code>vowel_counter</code> function. <code>vowel_counter</code> is called once when <code>process_doc</code> is defined with the <code>@</code> syntax, but the <code>wrapper</code> function that it returns is called every time <code>process_doc</code> is called. That’s why <code>vowel_count</code> is preserved and printed after each time.</li> <li>Python decorators are just another (sometimes simpler) way of writing a higher-order function. These two pieces of code are <em>identical</em>:</li> <li>With Decorator</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFC799">@vowel_counter</span></span>
<span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> process_doc</span><span style="color:#FFF">(doc):</span></span>
<span class="line"><span style="color:#FFC799">    print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Document: </span><span style="color:#FFC799">{</span><span style="color:#FFF">doc</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">process_doc(</span><span style="color:#99FFE4">"Something wicked this way comes"</span><span style="color:#FFF">)</span></span></code></pre> <ul><li>Without decorator</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> process</span><span style="color:#FFF">(doc):</span></span>
<span class="line"><span style="color:#FFC799">    print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Document: </span><span style="color:#FFC799">{</span><span style="color:#FFF">doc</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">process_doc </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> vowel_counter(process)</span></span>
<span class="line"><span style="color:#FFF">process_doc(</span><span style="color:#99FFE4">"Something wicked this way comes"</span><span style="color:#FFF">)</span></span></code></pre> <h3>Args and Kwargs:</h3> <ul><li>In Python, <a href="https://book.pythontips.com/en/latest/args_and_kwargs.html" rel="nofollow"><code>*args</code> and <code>**kwargs</code></a> allow a function to accept and deal with a <em>variable</em> number of arguments. <ul><li><code>*args</code> collects positional arguments into a <em>tuple</em></li> <li><code>**kwargs</code> collects keyword (named) arguments into a <em>dictionary</em></li></ul></li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> print_arguments</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">*</span><span style="color:#FFF">args, </span><span style="color:#A0A0A0">**</span><span style="color:#FFF">kwargs):</span></span>
<span class="line"><span style="color:#FFC799">    print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Positional arguments: </span><span style="color:#FFC799">{</span><span style="color:#FFF">args</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFC799">    print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Keyword arguments: </span><span style="color:#FFC799">{</span><span style="color:#FFF">kwargs</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">print_arguments(</span><span style="color:#99FFE4">"hello"</span><span style="color:#FFF">, </span><span style="color:#99FFE4">"world"</span><span style="color:#FFF">, a</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">1</span><span style="color:#FFF">, b</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">2</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># Positional arguments: ('hello', 'world')</span></span>
<span class="line"><span style="color:#8B8B8B94"># Keyword arguments: {'a': 1, 'b': 2}</span></span></code></pre> <ul><li>Positional arguments are the ones you’re already familiar with, where the order of the arguments matters. Like this:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> sub</span><span style="color:#FFF">(a, b):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> a </span><span style="color:#A0A0A0">-</span><span style="color:#FFF"> b</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B8B8B94"># a=3, b=2</span></span>
<span class="line"><span style="color:#FFF">res </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> sub(</span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># res = 1</span></span></code></pre> <ul><li><a href="https://docs.python.org/3/tutorial/controlflow.html#keyword-arguments" rel="nofollow">Keyword arguments</a> are passed in by name. <em>Order does not matter</em>. Like this:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> sub</span><span style="color:#FFF">(a, b):</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> a </span><span style="color:#A0A0A0">-</span><span style="color:#FFF"> b</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">res </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> sub(b</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">3</span><span style="color:#FFF">, a</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">2</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># res = -1</span></span>
<span class="line"><span style="color:#FFF">res </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> sub(a</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">3</span><span style="color:#FFF">, b</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">2</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94"># res = 1</span></span></code></pre> <ul><li>Any positional arguments <em>must come before</em> keyword arguments. This will <em>not</em> work:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#FFF">sub(b</span><span style="color:#A0A0A0">=</span><span style="color:#FFC799">3</span><span style="color:#FFF">, </span><span style="color:#FFC799">2</span><span style="color:#FFF">)</span></span></code></pre> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> args_logger</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">*</span><span style="color:#FFF">args, </span><span style="color:#A0A0A0">**</span><span style="color:#FFF">kwargs):</span></span>
<span class="line"><span style="color:#8B8B8B94">    # ?</span></span>
<span class="line"><span style="color:#FFF">    counter </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 1</span></span>
<span class="line"><span style="color:#A0A0A0">    for</span><span style="color:#FFF"> args </span><span style="color:#A0A0A0">in</span><span style="color:#FFF"> args:</span></span>
<span class="line"><span style="color:#FFC799">        print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"</span><span style="color:#FFC799">{</span><span style="color:#FFF">counter</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">. </span><span style="color:#FFC799">{</span><span style="color:#FFF">args</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#FFF">        counter </span><span style="color:#A0A0A0">+=</span><span style="color:#FFC799"> 1</span></span>
<span class="line"><span style="color:#A0A0A0">    for</span><span style="color:#FFF"> key </span><span style="color:#A0A0A0">in</span><span style="color:#FFC799"> sorted</span><span style="color:#FFF">(kwargs.keys()):</span></span>
<span class="line"><span style="color:#FFC799">        print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"* </span><span style="color:#FFC799">{</span><span style="color:#FFF">key</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">: </span><span style="color:#FFC799">{</span><span style="color:#FFF">kwargs[key]</span><span style="color:#FFC799">}</span><span style="color:#99FFE4">"</span><span style="color:#FFF">)</span></span></code></pre> <ul><li>The <code>*args</code> and <code>**kwargs</code> syntax is great for decorators that are intended to work on functions with different <a href="https://developer.mozilla.org/en-US/docs/Glossary/Signature/Function" rel="nofollow">signatures</a>.</li> <li>The <code>log_call_count</code> function below doesn’t care about the number or type of the decorated function’s (<code>func_to_decorate</code>) arguments. It just wants to count how many times the function is called. However, it still needs to pass any arguments through to the wrapped function.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> log_call_count</span><span style="color:#FFF">(func_to_decorate):</span></span>
<span class="line"><span style="color:#FFF">    count </span><span style="color:#A0A0A0">=</span><span style="color:#FFC799"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0A0A0">    def</span><span style="color:#FFC799"> wrapper</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">*</span><span style="color:#FFF">args, </span><span style="color:#A0A0A0">**</span><span style="color:#FFF">kwargs):</span></span>
<span class="line"><span style="color:#A0A0A0">        nonlocal</span><span style="color:#FFF"> count</span></span>
<span class="line"><span style="color:#FFF">        count </span><span style="color:#A0A0A0">+=</span><span style="color:#FFC799"> 1</span></span>
<span class="line"><span style="color:#FFC799">        print</span><span style="color:#FFF">(</span><span style="color:#A0A0A0">f</span><span style="color:#99FFE4">"Called </span><span style="color:#FFC799">{</span><span style="color:#FFF">count</span><span style="color:#FFC799">}</span><span style="color:#99FFE4"> times"</span><span style="color:#FFF">)</span></span>
<span class="line"><span style="color:#8B8B8B94">        # The * and ** syntax unpacks the arguments</span></span>
<span class="line"><span style="color:#8B8B8B94">        # and passes them to the decorated function</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#FFF"> func_to_decorate(</span><span style="color:#A0A0A0">*</span><span style="color:#FFF">args, </span><span style="color:#A0A0A0">**</span><span style="color:#FFF">kwargs)</span></span>
<span class="line"><span style="color:#A0A0A0">    return</span><span style="color:#FFF"> wrapper</span></span></code></pre> <h3>Enums:</h3> <ul><li>Doing the admittedly weird <code>class</code> and <code>isinstance()</code> thing works, but it turns out, there’s a better way in some cases. If you’re trying to represent a fixed set of values (but not store additional data within them) <a href="https://docs.python.org/3/library/enum.html" rel="nofollow">enums</a> are the way to go.</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">from</span><span style="color:#FFF"> enum </span><span style="color:#A0A0A0">import</span><span style="color:#FFF"> Enum</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFF">Color </span><span style="color:#A0A0A0">=</span><span style="color:#FFF"> Enum(</span><span style="color:#99FFE4">'Color'</span><span style="color:#FFF">, [</span><span style="color:#99FFE4">'RED'</span><span style="color:#FFF">, </span><span style="color:#99FFE4">'GREEN'</span><span style="color:#FFF">, </span><span style="color:#99FFE4">'BLUE'</span><span style="color:#FFF">])</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(Color.RED)  </span><span style="color:#8B8B8B94"># this works, prints 'Color.RED'</span></span>
<span class="line"><span style="color:#FFC799">print</span><span style="color:#FFF">(Color.TEAL) </span><span style="color:#8B8B8B94"># this raises an exception</span></span></code></pre> <ul><li>Unfortunately, Python does <em>not</em> support sum types as well as some of the other <a href="https://developer.mozilla.org/en-US/docs/Glossary/Static_typing" rel="nofollow">statically typed</a> languages.</li> <li>Python <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">does not enforce</a> your types before your code runs. That’s why we need this line here to <code>raise</code> an <code>Exception</code> if a color is invalid:</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> color_to_hex</span><span style="color:#FFF">(color):</span></span>
<span class="line"><span style="color:#A0A0A0">    if</span><span style="color:#FFF"> color </span><span style="color:#A0A0A0">==</span><span style="color:#FFF"> Color.GREEN:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#99FFE4"> '#00FF00'</span></span>
<span class="line"><span style="color:#A0A0A0">    elif</span><span style="color:#FFF"> color </span><span style="color:#A0A0A0">==</span><span style="color:#FFF"> Color.BLUE:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#99FFE4"> '#0000FF'</span></span>
<span class="line"><span style="color:#A0A0A0">    elif</span><span style="color:#FFF"> color </span><span style="color:#A0A0A0">==</span><span style="color:#FFF"> Color.RED:</span></span>
<span class="line"><span style="color:#A0A0A0">        return</span><span style="color:#99FFE4"> '#FF0000'</span></span>
<span class="line"><span style="color:#8B8B8B94">    # handle the case where the color is invalid</span></span>
<span class="line"><span style="color:#A0A0A0">    raise</span><span style="color:#FFC799"> Exception</span><span style="color:#FFF">(</span><span style="color:#99FFE4">'Unknown color'</span><span style="color:#FFF">)</span></span></code></pre> <h3>Match stmt:</h3> <ul><li>Python has a <code>match</code> statement that tends to be a lot cleaner than a series of <code>if/else/elif</code> statements when we’re working with a fixed set of possible values (like a sum type, or more specifically an enum):</li></ul> <pre class="shiki vesper" style="background-color:#101010;color:#FFF"><code><span class="line"><span style="color:#A0A0A0">def</span><span style="color:#FFC799"> get_hex</span><span style="color:#FFF">(color):</span></span>
<span class="line"><span style="color:#A0A0A0">    match</span><span style="color:#FFF"> color:</span></span>
<span class="line"><span style="color:#A0A0A0">        case</span><span style="color:#FFF"> Color.RED:</span></span>
<span class="line"><span style="color:#A0A0A0">            return</span><span style="color:#99FFE4"> "#FF0000"</span></span>
<span class="line"><span style="color:#A0A0A0">        case</span><span style="color:#FFF"> Color.GREEN:</span></span>
<span class="line"><span style="color:#A0A0A0">            return</span><span style="color:#99FFE4"> "#00FF00"</span></span>
<span class="line"><span style="color:#A0A0A0">        case</span><span style="color:#FFF"> Color.BLUE:</span></span>
<span class="line"><span style="color:#A0A0A0">            return</span><span style="color:#99FFE4"> "#0000FF"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B8B8B94">        # default case</span></span>
<span class="line"><span style="color:#8B8B8B94">        # (invalid Color)</span></span>
<span class="line"><span style="color:#A0A0A0">        case</span><span style="color:#FFF"> _:</span></span>
<span class="line"><span style="color:#A0A0A0">            return</span><span style="color:#99FFE4"> "#FFFFFF"</span></span></code></pre> <h3>Functools Module:</h3> <ul><li>ref: <a href="https://martinheinz.dev/blog/52" rel="nofollow">https://martinheinz.dev/blog/52</a></li> <li>functool module offers many useful higher order functions that act on or return other functions, which we can leverage to implement function caching, overloading, creating decorators and in general to make our code much more functional.</li> <li>experiments: <a href="https://github.com/sagnikc395/functools-explore" rel="nofollow">https://github.com/sagnikc395/functools-explore</a></li></ul> <h4>Caching :</h4> <ul><li>there are caching functions - <code>lru_cache</code>, <code>cache</code> and <code>cached_property</code>.</li> <li><code>lru_cache</code> as the name suggests provides the least recently used cache of function results or in other words - memoization of results.</li> <li>can inspect the cache info of our function using the <code>cache_info</code> method and which shows number of cache hits or misses.</li> <li>Decorator also provides a <code>clear_cache</code> and a<code>cache_parameters</code> methods for invalidating cached results and inspecting parameters respectively.</li> <li>For more granular caching, can pass the parameter <code>typed=True</code> argument, which makes it so that arguments of different types are cached separately.</li> <li>Another caching decorator in <code>functools</code> is a function simply called <code>cache</code>. <ul><li>Simple wrapper on top of the <code>lru_cache</code> which will omit the <code>max_size</code> argument making it smaller and after as it doesn’t need to evict old values.</li></ul></li> <li><code>cached_property</code> decorator <ul><li>used for caching the results of class attributes.</li> <li>useful if we have property that is expensive to compute while also immutable.</li> <li>Use Case: cache rendered HTML page which would get returned to user over-and-over again. Same could be done for certain database queries or long mathematical computation.</li> <li>only runs on lookups, therefore allowing us to modify the attribute.</li> <li>after the attribute is modified, the previously cached value won’t be used , instead new value will be computed and cached.</li></ul></li></ul> <h4>comparing and ordering:</h4> <ul><li>luckily, functools, module includes <code>@total_ordering</code> decorator that can help us with that. - all we need to do , is implement <code>__eq__</code> and one of the remaining methods and rest will be automatically providedd by the decorator.</li></ul> <h4>partial:</h4> <ul><li>many external libraries and frameworks provide functions and interfaces that require us to pass in callback functions.</li> <li>What if we need to also pass in some arguments along with the callback functions. <ul><li>thats where <code>functools.partial</code> comes in handy - <code>partial</code> can be used to freeze some (or all) of the function’s arguments, creating new object with simplified function signatures.</li></ul></li></ul>`);
      },
      $$slots: { default: true }
    }
  ]));
}
const __vite_glob_0_22 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Functional_Programming_md,
  metadata
}, Symbol.toStringTag, { value: "Module" }));
export {
  __vite_glob_0_22 as _
};
